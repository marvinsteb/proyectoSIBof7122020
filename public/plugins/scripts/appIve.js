function templateInvalidTooltip(e){return`<div class="invalid-tooltip">${e}</div>`}function templateFormGroup(e,i){let t=$('<div class="col-sm">\n                    <div class="form-group">\n                    </div>\n                </div>');return null!=i&&($(t).addClass(i),$(t).removeClass("col-sm")),$(t).find("div.form-group").append(e),t}function templateInputText(e,i,t,o,n,a){let r=$(`<label>${o}</label>\n                   <input name="${i}${e}" id="${i}${e}" type="text" class="form-control ${i}" placeholder="${o} ..." maxlength="${t}"/>`);return r=templateFormGroup(r),!0===n&&$(r).find(`input#${i}${e}`).prop("required",!0),!0===a&&$(r).find(`input#${i}${e}`).prop("disabled",!0),r}function templateCamposNommbres(e){const i=templateInputText(e,"primerApellido",15,"Primer Apellido",!0),t=templateInputText(e,"segundoApellido",15,"Segundo Apellido");let o=templateInputText(e,"apellidoCasada",15,"Apellido Casada"),n=templateInvalidTooltip("No debe anteponerse a la palabra “DE” al referirse al apellido de casada. Especificar únicamente el apellido.");$(o).find("div.form-group").append(n),validarApellidoCasada($(o).find(`input#apellidoCasada${e}`));const a=templateInputText(e,"primerNombre",15,"Primer Nombre",!0),r=templateInputText(e,"segundoNombre",15,"Segundo Nombre"),l=templateInputText(e,"otrosNombres",30,"Otros Nombres");let c=$(' <div class="row"></div>');return $(c).append(i),$(c).append(t),$(c).append(o),$(c).append(a),$(c).append(r),$(c).append(l),c}function templateSexo(e){let i=$(`<label for="sexo${e}">Sexo</label>\n                          <select name="sexo${e}" id="sexo${e}" class="form-control custom-select sexo select2" style="width: 100%" required>\n                              <option value="" disabled selected>Selecciona</option>\n                              <option value="M">Masculino</option>\n                              <option value="F">Femenino</option>\n                          </select>`);return i=templateFormGroup(i),$(i).find("select").select2(),i}function templateNit(e){let i=$(`<label>Nit</label>\n                    <input name="nit${e}" id="nit${e}" type="text" class="form-control nit" placeholder="Nit ..." maxlength="20" />`);return i=templateFormGroup(i),validarNit($(i).find(`input#nit${e}`)),i}function templateDoctoIdentificacion(e){let i=$(`<label for="tipoDoctoIdentificacion${e}">Docto. identificación</label>\n                           <select name="tipoDoctoIdentificacion${e}" id="tipoDoctoIdentificacion${e}" class="form-control custom-select tipoDoctoIdentificacion validaPaisPasaporte select2" style="width: 100%" required>\n                               <option value="" disabled selected>Selecciona</option>\n                               <option value="D">DPI</option>\n                               <option value="P">Pasaporte</option>\n                           </select>`);return i=templateFormGroup(i),$(i).find(`select#tipoDoctoIdentificacion${e}`).select2(),habilitaPaisPasaporte($(i).find(`select#tipoDoctoIdentificacion${e}`)),i}function templateNumDocumento(e){let i=$(`<label>Número identificación</label>\n                       <input name="noDocIdentificacion${e}" id="noDocIdentificacion${e}" type="text" class="form-control noDocIdentificacion" placeholder="Número identificación..." maxlength="20" required disabled/>`);return i=templateFormGroup(i),templateFormGroup(i)}function templateProfecionOficio(e){return templateFormGroup(`<label>Profesión u oficio</label>\n                          <input name="profecionOficio${e}" id="profecionOficio${e}" type="text" class="form-control profecionOficio" placeholder="Profesión u oficio ..." maxlength="100" required />`)}function templateEmail(e){return templateFormGroup(`<label>Correo electrónico</label>\n                     <input name="email${e}" id="email${e}" type="email" class="form-control email" placeholder="Correo electrónico ..." maxlength="100" />`)}function templateEstadoCivil(e){let i=$(`<label>Estado civil</label>\n                 <select name="estadoCivil${e}" id="estadoCivil${e}" class="form-control custom-select estadoCivil select2" style="width: 100%" required>\n                    <option value="" disabled selected>Selecciona</option>\n                    <option value="S">Soltero</option>\n                    <option value="C">Casado</option>\n                 </select>`);return i=templateFormGroup(i),$(i).find("select").select2(),i}function templatePais(e,i,t,o="",n=!1){let a="";1==t&&(a="deshabilitaDepartamentoMunicipio"),selectDesabilitado="",1==n&&(selectDesabilitado="disabled");let r=$(`<label for="${e}">${i} <span>*</span></label>\n                        <select name="${e}" id="${e}" class="form-control custom-select pais ${a} setPais ${o} select2" style="width: 100%" required ${selectDesabilitado}>\n                        <option value="" disabled selected>Selecciona</option>\n                        </select>`);r=templateFormGroup(r);const l=$(r).find(`select#${e}`);return cargarPais(l),$(l).select2(),1==t&&habilitaDepartamentoMunicipio(l),r}function templateDepartamento(e,i){let t=$(` <label>${i} <span class="oculto">*</span></label>\n                            <select name="depto${e}" id="depto${e}" class="form-control custom-select depto getMunicipio setDepartamento select2" style="width: 100%" required disabled>\n                                <option value="" disabled selected>Selecciona</option>\n                            </select>`);return t=templateFormGroup(t),cargarDepartamentos($(t).find(`select#depto${e}`)),$(t).find(`select#depto${e}`).select2(),t}function templateMunicipio(e,i){let t=$(`<label>${i} <span class="oculto">*</span></label>\n                        <select name="muni${e}" id="muni${e}" class="form-control custom-select muni setMunicipio select2" style="width: 100%" required disabled>\n                            <option value="" disabled selected>Selecciona</option>\n                        </select>`);return t=templateFormGroup(t),$(t).find(`select#muni${e}`).select2(),t}function templateCondicionMigratoria(e){let i=$(`<label>Condición migratoria</label>\n                    <select name="condicionMigratoria${e}" id="condicionMigratoria${e}" class="form-control custom-select condicionMigratoria select2" style="width: 100%" disabled required>\n                    <option value="" disabled selected>Selecciona</option>\n                    </select>`);return i=templateFormGroup(i)}function templateOtraCondicionMigratoria(e){return templateFormGroup(`\n                     <label>Especifique</label>\n                     <input name="otraCoMi${e}" id="otraCoMi${e}" type="text" class="form-control otraCoMi" placeholder="Otra condición migratoria ..." maxlength="100" disabled required />`)}function templateFecha(e,i,t,o,n){let a=templateFormGroup($(`<label>Fecha ${t}</label>\n                        <div class="input-group date" id="fecha${i}_${e}" data-target-input="nearest">\n                            <input name="fecha${i}${e}" id="fecha${i}${e}" type="text" class="form-control ${i} datetimepicker-input" data-target="#fecha${i}_${e}" required />\n                            <div class="invalid-tooltip">Ingresa una fecha correcta, no se permite una fecha mayor a la fecha actual</div>\n                            <div class="input-group-append" data-target="#fecha${i}_${e}" data-toggle="datetimepicker">\n                                <div class="input-group-text">\n                                    <i class="fa fa-calendar"></i>\n                                </div>\n                            </div>\n                        </div>`),o);if(!1===n){$(a).find(`input#fecha${i}${e}`).prop("required",!1)}return setFormatoFecha($(a).find("div.date")),a}function templateNacionalidad(e){let i=$(`\n        <div class="col-sm" id="nacionalidad${e}" cantidad="1">\n            <div class="form-group">\n                <div class="row">\n                    <div class="col-sm">\n                        <label>Nacionalidad</label>\n                        <select name="nacionalidad${e}" id="nacionalidad${e}_1" class="form-control custom-select nacionalidad select2" style="width: 100%" required>\n                            <option value="" disabled selected>Selecciona</option>\n                        </select>\n                    </div>\n                    <div class="col-sm my-auto pt-2"></div>\n                </div>\n            </div>\n            <div class="form-group">\n                <button type="button" id="agregarNacionalidad${e}" class="btn btn-primary agregarNacionalidad">Agregar Nacionalidad</button>\n            </div>\n        </div>`);const t=$(i).find(`button#agregarNacionalidad${e}`);let o=$(i).find(`select#nacionalidad${e}_1`);return $(o).select2(),cargarPais(o),agregarTemplateNacionalidad(t),i}function templateTelefono(e,i){let t="";return i&&(t='<button type="button" class="btn btn-danger">Borrar</button>'),$(`\n        <div class="form-group">\n            <div class="row">\n                <div class="col-sm">\n                    <input name="${e}" id="${e}" type="text" class="form-control telefono" placeholder="telefono ..." maxlength="30" required />\n                </div>\n                <div class="col-sm">${t}</div>\n            </div>\n        </div>`)}function templateContenedorTelefonos(e){let i=templateTelefono(`telefono${e}_1`,!1),t=$(`\n    <div class="col-sm" id="telefono${e}" cantidad="1">\n        <label>Teléfonos</label>\n        <div class="form-group">\n            <button type="button" id="agregarTelefono${e}" class="btn btn-primary agregarTelefono">Agregar teléfono</button>\n        </div>\n    </div>`);return $(t).children().last().before(i),agregarTemplateTelefono($(t).find(`button#agregarTelefono${e}`)),t}function templateCamposNacimiento(e){let i=templateFecha(e,"Nacimiento","nacimiento"),t=templatePais(`paisNacimiento${e}`,"País nacimiento",!0),o=templateDepartamento(`Nacimiento${e}`,"Depto. nacimiento"),n=templateMunicipio(`Nacimiento${e}`,"Municipio nacimiento"),a=templateCondicionMigratoria(e),r=templateOtraCondicionMigratoria(e),l=$('<div class="row"></div>');return $(l).append(i),$(l).append(t),$(l).append(o),$(l).append(n),$(l).append(a),$(l).append(r),l}function templateCamposResidencia(e){let i=templatePais(`paisRecidencia${e}`,"País residencia",!0),t=templateDepartamento(`Recidencia${e}`,"Departamento residencia"),o=templateMunicipio(`Recidencia${e}`,"Municipio residencia"),n=$('<div class="row"></div>');return $(n).append(i),$(n).append(t),$(n).append(o),n}function templateCamposDocumentos(e){let i=templateSexo(e),t=templateEstadoCivil(e),o=templateNit(e),n=templateDoctoIdentificacion(e),a=templateNumDocumento(e),r=templatePais(`emicionPasaporte${e}`,"País (Pasaporte)",!1,"emicionPasaporte",!0),l=$('<div class="row"></div>');return $(l).append(i),$(l).append(t),$(l).append(o),$(l).append(n),$(l).append(a),$(l).append(r),l}function templateCamposProfecion(e){let i=templateProfecionOficio(e),t=templateEmail(e),o=$('<div class="row"></div>');return $(o).append(i),$(o).append(t),o}function templateDireccion(e,i,t){return $(`\n        <div class="row">\n            <div class="col-sm">\n                <label>${i}</label>\n                <input name="direccion${t}${e}" id="direccion${t}${e}" type="text" class="form-control direccion" placeholder="Dirección..." maxlength="400" required />\n            </div>\n        </div>`)}function templateCamposNacionalidadTelefono(e){let i=templateNacionalidad(e),t=templateContenedorTelefonos(e),o=$('<div class="row"></div>');return $(o).append(i),$(o).append(t),o}function templateCpe(e){return $(`\n        <div class="row">\n            <div class="col-sm-6">\n                <div class="form-check">\n                    <div><label>¿El cliente es Contratista y Proveedor del Estado (CPE)?</label></div>\n                    <div class="icheck-primary d-inline">\n                        <input type="radio" id="cpeSi${e}" class="cpe form-check-input" name="cpe${e}" value="S" required />\n                        <label for="cpeSi${e}">Sí</label>\n                    </div>\n                    <div class="icheck-primary d-inline">\n                        <input type="radio" id="cpeNo${e}" class="cpe form-check-input" name="cpe${e}" value="N" required />\n                        <label for="cpeNo${e}">No</label>\n                        <div class="invalid-tooltip">Indica si el cliente es CPE.</div>\n                    </div>\n                </div>\n            </div>\n        </div>`)}function templateAsoPep(e){let i=$(`\n        <div class="row">\n            <div class="col-sm">\n                <div class="form-check">\n                    <div>\n                        <label>¿El cliente tiene parentesco o es asociado cercano a una Persona Expuesta Políticamente (PEP)?</label>\n                    </div>\n                    <div class="icheck-primary d-inline">\n                        <input type="radio" id="primaryAsoPepSi${e}" class="asoPep form-check-input" name="asoPep${e}" value="S" required />\n                        <label for="primaryAsoPepSi${e}">Sí</label>\n                    </div>\n                    <div class="icheck-primary d-inline">\n                        <input type="radio" id="primaryAsoPepNo${e}" class="asoPep form-check-input" name="asoPep${e}" value="N" required />\n                        <label for="primaryAsoPepNo${e}">No</label>\n                        <div class="invalid-tooltip">Indica si el cliente tine un tiene parentesco o es asociadoa una Persona PEP.</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id="datosasoPep${e}">\n             <div class="info" cantidad="0">\n            </div>\n            <div class="btnadd">\n            </div>\n        </div>\n    `);return verificarAsoPep($(i).find("input.asoPep")),i}function templatePersonaPep(e){let i=$(`\n            <div class="row">\n                <div class="col-sm-6">\n                    <div class="form-check">\n                        <div><label>¿El cliente es una Persona Expuesta Políticamente (PEP)?</label></div>\n                        <div class="icheck-primary d-inline">\n                            <input type="radio" id="pepSi${e}" class="pep form-check-input" name="pep${e}" value="S" required />\n                            <label for="pepSi${e}">Sí</label>\n                        </div>\n                        <div class="icheck-primary d-inline">\n                            <input type="radio" id="pepNo${e}" class="pep form-check-input" name="pep${e}" value="N" required />\n                            <label for="pepNo${e}">No</label>\n                            <div class="invalid-tooltip">Indica si el cliente es PEP.</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="datospep${e}"></div>`);return verificarPersonaPep($(i).find("input.pep")),i}function templateMontoIngresos(e){let i=$(' <div class="row"></div>'),t=$(`<label for="montoIngresos${e}" class = "d-inline">Monto mensual aproximado de los ingresos considerando todas las actividades económicas a las que se dedica (monto en quetzales)</label>`);t=templateFormGroup(t,"col-sm-9");let o=$(`<input type="number" name = "montoIngresos" id="montoIngresos${e}" class="form-control d-inline" placeholder="0.00"  min="0" step=".01" style="text-align:right;" required/>`);return o=templateFormGroup(o,"col-sm-3"),$(i).append(t),$(i).append(o),i}function templatePropositoRc(e){let i=$('<div class="row"></div>');const t=`<label for="propositoRC${e}">Propósito de la relación de negocios</label>\n                   <input name="propositoRC" id="propositoRC${e}" type="text" class="form-control" placeholder="Propósito de la relación de negocios..." maxlength="400" required />`;return $(i).append(templateFormGroup(t)),i}function templateDatosIngresos(e){let i=$(` <div class="row">\n                        <div class="form-group">\n                            <button type="button" id="agregarFuenteIngresos${e}" class="btn btn-primary agregarFuenteIngresos">Agregar fuente de ingresos</button>\n                        </div>\n                    </div>`);agregarTemplateFuenteIngresos($(i).find(`button#agregarFuenteIngresos${e}`));let t=$(`\n                    <div id="datosfuenteingresos${e}">\n                        <div class="row">\n                            <div class="col-sm">\n                                <div class="form-group">\n                                    <label for="">Fuente de ingresos</label>\n                                </div>\n                            </div>\n                        </div>\n                        <div id="fuenteingresos${e}" cantidad = "0" idinput= ""></div>\n                    </div>`);$(t).append(i);const o=templateCamposFuenteIngreso(`fuenteingresos${e}`,0);return $(t).find(`div#fuenteingresos${e}`).append(o),t}function templateInformacionEconomicaInicial(e){const i=templateMontoIngresos(e),t=templatePropositoRc(e);let o=templateDatosIngresos(e),n=$('<div class="card card-info mt-3">\n                                <div class="card-header">\n                                    <h3 class="card-title">Información económica del cliente</h3>\n                                    <div class="card-tools">\n                                        <button type="button" class="btn btn-tool" data-card-widget="collapse">\n                                            <i class="fas fa-minus"></i>\n                                        </button>\n                                    </div>\n                                </div>\n                                <div class="card-body">\n                                </div>\n                            </div>');return $(n).find("div.card-body").append(i),$(n).find("div.card-body").append(t),$(n).find("div.card-body").append(o),n}function templateDatosPersonales(e,i){let t=templateCamposNommbres(e),o=templateCamposNacimiento(e),n=templateCamposDocumentos(e),a=templateCamposProfecion(e),r=templateDireccion(e,"Dirección de residencia completa (calle o avenida, número de casa, colonia, sector, lote, manzana, otros)","Recidencia"),l=templateCamposResidencia(e),c=templateCamposNacionalidadTelefono(e),s=templateCpe(e),d=templatePersonaPep(e),p=templateAsoPep(e),u=$(`\n    <div class="card card-info mt-3" id="${e}">\n        <div class="card-header">\n            <h3 class="card-title">Información del ${i}</h3>\n            <div class="card-tools">\n                <button type="button" class="btn btn-tool" data-card-widget="collapse">\n                    <i class="fas fa-minus"></i>\n                </button>\n            </div>\n        </div>\n        <div class="card-body">\n        </div>\n     </div>`),m=$(u).find("div.card-body");return $(m).append(t),$(m).append(o),$(m).append(n),$(m).append(a),$(m).append(r),$(m).append(l),$(m).append(c),$(m).append(s),$(m).append(d),$(m).append(p),u}function borrarTemplateFuenteIngresos(e){$(e).find("button").click(function(){console.log("eliminando fuente de ingresos"),console.log($(this).parent().parent().parent().parent().remove())})}function templateCamposFuenteIngreso(e,i){let t=$(`\n    <div class="row">\n        <div class="col-sm-2">\n            <div class="form-group">\n                <select name="select" id="select${e}_${i}" class="form-control custom-select select2 fuenteIngresos" style="width: 100%" required>\n                    <option value="" disabled selected>Selecciona</option>\n                    <option value="NP">Negocio propio</option>\n                    <option value="RD">Relación de dependencia</option>\n                    <option value="OI">Otras fuentes de ingreso</option>\n                </select>\n            </div>\n        </div>\n        <div class="col-sm">\n            <div class="form-group row">\n                    <div class="col-sm-2">\n                        <label for="input${e}_${i}" class="ml-4" id="label${e}_${i}"></label>\n                    </div>\n                    <div class="col-sm ml-2">\n                        <input name="input" id="input${e}_${i}" type="text" class="form-control" required disabled />\n                    </div>\n                    <div class="col-sm-1 borrarFuenteIngreso" >\n                        <button type="button" class="btn btn-danger">Borrar</button>\n                    </div>\n            </div>\n        </div>\n    </div>`);if($(t).find(`select#select${e}_${i}`).select2(),validarTipoFuenteIngreso($(t).find(`select#select${e}_${i}`)),0===i)$(t).find("button").remove();else{borrarTemplateFuenteIngresos($(t).find("div.borrarFuenteIngreso"))}return t}function templateFilaUnoProductoServicio(e){const i=templateFecha(`_${e}`,"ProductoServicio",""),t=templatePais(`paisProductoServicio_${e}`,"País en donde se contrata el producto o servicio",!0,"",!1),o=templateDepartamento(`ProductoServicio_${e}`,"Departamento"),n=templateMunicipio(`ProductoServicio_${e}`,"Municipio");let a=$('<div class="row"></div>');return $(a).append(i),$(a).append(t),$(a).append(o),$(a).append(n),a}function templateFilaDosProductoServicio(e){const i=templateInputText(e,"identificadorProductoServicio_",50,"Identificador producto y/o servicio",!1),t=templateInputText(e,"tipoProductoServicio_",100,"Tipo producto y/o servicio",!0),o=templateInputText(e,"nombreProductoServicio_",300,"Nombre producto y/o servicio",!1);let n=$('<div class="row"></div>');return $(n).append(i),$(n).append(t),$(n).append(o),n}function templateFilaTresProductoServicio(e){const i=templateInputText(e,"descripcionProductoServicio_",600,"Descripción producto y/o servicio",!0);let t=$('<div class="row"></div>');return t=$(t).append(i)}function templateFilaCuatroProductoServicio(e){const i=templateInputText(e,"nombreContrataProductoServicio_",400,"A nombre de quién se contrata el producto y/o servicio",!0);let t=$('<div class="row"></div>');return t=$(t).append(i)}function templateMoneda(e){let i=$(`<label for="moneda${e}">Moneda</label>\n                    <select name="moneda" class="form-control custom-select moneda select2" style="width: 100%" required></select>`);i=templateFormGroup(i,"col-sm-3");let t=$(i).find("select.moneda");return $(t).select2(),cargarMoneda(t),i}function templateValor(e){return templateFormGroup($(`<label for="valor${e}">Valor producto y/o servicio</label>\n                     <input type="number" name = "valor" id="valor${e}" class="form-control valor" placeholder="0.00"  min="0" step=".01" style="text-align:right;" required/>`),"col-sm-3")}function templateFilaCincoProductoServicio(e){const i=templateMoneda(`ProductoServicio_${e}`),t=templateValor(`ProductoServicio_${e}`);let o=$('<div class="row"></div>');return o=$(o).append(i),o=$(o).append(t)}function btnAgregarBeneficiario(e){$(e).click(function(e){e.preventDefault(),e.stopPropagation(),console.log("agregando beneficiario"),agregarCamposMinimos("Beneficiario",`div#datosBeneficiario${$(this).parent().parent().parent().parent().attr("id")}`)})}function templateBeneficiario(e){let i=$(`<div class="row"><H2>Beneficiarios </h2><div id="datosBeneficiarioProductoServicio_${e}"  class="col-sm-12" cantidad="0" ></div></div>`),t=$(`<div class="col-sm form-group">\n                           <button type="button" id="agregarBeneficiario${e}" class="btn btn-primary agregarBeneficiario">Agregar Beneficiario</button>\n                       </div>`);return btnAgregarBeneficiario($(t).find(`button#agregarBeneficiario${e}`)),$(i).append(t),i}function btnAgregarOtroFirmantes(e){$(e).click(function(e){e.preventDefault(),e.stopPropagation(),agregarCamposMinimos("OtrosFirmantes",`div#datosOtrosFirmantes${$(this).parent().parent().parent().parent().attr("id")}`)})}function templateOtrosFirmantes(e){let i=$(`<div class="row"><H2>Otros Firmantes </h2><div id="datosOtrosFirmantesProductoServicio_${e}"  class="col-sm-12" cantidad="0" ></div></div>`),t=$(`<div class="col-sm form-group">\n                           <button type="button" id="agregarOtrosFirmantes${e}" class="btn btn-primary agregarOtrosFirmantes">Agregar Otros Firmantes</button>\n                       </div>`);return btnAgregarOtroFirmantes($(t).find(`button#agregarOtrosFirmantes${e}`)),$(i).append(t),i}function templateProductoServicio(e){const i=templateFilaUnoProductoServicio(e),t=templateFilaDosProductoServicio(e),o=templateFilaTresProductoServicio(e),n=templateFilaCuatroProductoServicio(e),a=templateFilaCincoProductoServicio(e),r=templateBeneficiario(e);let l=templateOtrosFirmantes(e),c=$(`\n                <div class="card card-info mt-3" id="ProductoServicio_${e}">\n                    <div class="card-header">\n                        <h3 class="card-title">Producto o servicio ${e}</h3>\n                        <div class="card-tools">\n                            <button type="button" class="btn btn-tool" data-card-widget="collapse">\n                                <i class="fas fa-minus"></i>\n                            </button>\n                            <button type="button" class="btn btn-tool" data-card-widget="remove">\n                                <i class="fas fa-times"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="card-body">\n                    </div>\n                </div>`);return $(c).find("div.card-body").append(i),$(c).find("div.card-body").append(t),$(c).find("div.card-body").append(o),$(c).find("div.card-body").append(n),$(c).find("div.card-body").append(a),$(c).find("div.card-body").append(r),$(c).find("div.card-body").append(l),eliminarCard($(c)),c}function agregarDatosPersonales(e,i,t){console.log(`agregado informacion del  ${i}`);let o=templateDatosPersonales(i,t);$(e).append(o)}function setFormatoFecha(e){for(let i=0;i<e.length;i++){$(e[i]).datetimepicker({format:"DD/MM/YYYY"});let t=$(e[i]).find("input");$(t).on("focusout",function(e){e.preventDefault(),e.stopPropagation();let i=new Date;i.setHours(0,0,0,0);let t=$(this).val();moment(t,"DD/MM/YYYY").toDate()<=i?$(this).removeClass("is-invalid"):($(this).val(null),$(this).addClass("is-invalid"))})}}function verificaActuaNombrePropio(e){for(let i=0;i<e.length;i++)$(e[i]).change(function(){let e=$(this).parent().parent().parent().parent().parent().parent().attr("id");console.log(e);let i=$(`div#representante${e}`),t=$(`input#calidadActua${e}`);"C"===this.value?(t[0].disabled=!0,$(t[0]).val(null),$(t[0]).prop("required",!1),$(t[0]).parent().find("label>span").addClass("oculto"),$(i).children().remove()):"R"===this.value&&(t[0].disabled=!1,$(t[0]).prop("required",!0),$(t[0]).parent().find("label>span.oculto").removeClass("oculto"),agregarDatosPersonales(i,`Representante${e}`,"representante"))})}function habilitaDepartamentoMunicipio(e){for(let i=0;i<e.length;i++)$(e[i]).change(function(){let e=$(this).parent().parent().parent(),i=$(e).find("select.condicionMigratoria"),t=$(e).find("input.otraCoMi"),o=$(e).find("select.getMunicipio"),n=$(e).find("select.setMunicipio");1==this.value?(o[0].disabled=!1,$(o[0]).parent().find("span").removeClass("oculto"),i.length&&(i[0].disabled=!0,$(i[0]).empty(),$(i[0]).append('<option value="" disabled selected>Selecciona</option>'),$(t[0]).val(null),t[0].disabled=!0,$(t[0]).parent().find("span").removeClass("oculto"))):(o[0].disabled=!0,$(o[0]).parent().find("span").addClass("oculto"),cargarDepartamentos($(o[0])),n[0].disabled=!0,$(n[0]).empty(),$(n[0]).parent().find("span").addClass("oculto"),$(n[0]).append('<option value="" disabled selected>Selecciona</option>'),i.length&&(i[0].disabled=!1,cargarCondicionMigratoria($(i[0]))))})}function cargarMunicipios(e){for(let i=0;i<e.length;i++)$(e[i]).change(function(e){let i=$(this).parent().parent().parent().find("select.setMunicipio");i[0].disabled=!0,$(i[0]).parent().find("span").removeClass("oculto"),$(i[0]).empty(),$(i[0]).append('<option value="" disabled selected>Selecciona</option>'),getMunicipios(function(e){e.forEach(function(e){$(i[0]).append(`<option value=${e.idMunicipio}> ${e.nombreMunicipio} </option>`)})},e.target.value),i[0].disabled=!1})}function cargarDepartamentos(e){for(let i=0;i<e.length;i++)$(e[i]).empty(),$(e[i]).append('<option value="" disabled selected>Selecciona</option>'),getDepartamentos(function(t){t.forEach(function(t){$(e[i]).append(`<option value=${t.codigoDepartamento}> ${t.nombreDepartamento} </option>`)})});cargarMunicipios(e)}function cargarMoneda(e){for(let i=0;i<e.length;i++)$(e[i]).empty(),$(e[i]).append('<option value="" disabled selected>Selecciona</option>'),getMoneda(function(t){t.forEach(function(t){$(e[i]).append(`<option value=${t.idMoneda}>${t.codigoMoneda}-${t.nombreMoneda}</option>`)})})}function cargarPais(e){for(let i=0;i<e.length;i++)$(e[i]).empty(),$(e[i]).append('<option value="" disabled selected>Selecciona</option>'),getPaises(function(t){t.forEach(function(t){$(e[i]).append(`<option value=${t.idPais}> ${t.nombrePais} </option>`)})})}function validarApellidoCasada(e){for(let i=0;i<e.length;i++)$(e[i]).on("focusout",function(){let e=$(this).val().trim();"D"==e[0]&&"E"==e[1]&&" "===e[2]||"d"==e[0]&&"e"==e[1]&&" "===e[2]||"D"==e[0]&&"e"==e[1]&&" "===e[2]||"d"==e[0]&&"E"==e[1]&&" "===e[2]?($(this).focus(),$(this).select(),$(this).addClass("is-invalid")):$(this).removeClass("is-invalid")})}function validarNit(e){for(let i=0;i<e.length;i++)$(e[i]).on("focusout",function(e){let i=$(this).val().trim(),t=templateInvalidTooltip("Ingresa un NIT valido");nitIsValid(i)?($(this).removeClass("is-invalid"),$(this).parent().find(t).remove()):($(this).addClass("is-invalid"),$(this).parent().append(t),$(this).val(null))})}function nitIsValid(e){if(!e)return!0;if(!new RegExp("^[0-9]+(-?[0-9kK])?$").test(e))return!1;let i=(e=e.replace(/-/,"")).length-1,t=e.substring(0,i),o=e.substring(i,i+1).toLowerCase(),n=t.length+1,a=0;for(let e=0;e<t.length;e++){let i=t.substring(e,e+1);a+=parseInt(i,10)*n,n-=1}let r=(11-a%11)%11;return o===(10==r?"k":r.toString())}function cargarCondicionMigratoria(e){for(let i=0;i<e.length;i++)$(e[i]).empty(),$(e[i]).append('<option value="" disabled selected>Selecciona</option>'),getCondicionMigratoria(function(t){t.forEach(function(t){$(e[i]).append(`<option value=${t.idListaCondicionMigratoria}> ${t.descripcion} </option>`)})}),habilitaOtraCondicionMigratoria($(e[i]))}function getMunicipios(e,i){$.get(`/departamentos/municipios/${i}`,function(i,t){e(i)})}function getMoneda(e){$.get("/moneda/listamonedas",function(i,t){e(i)})}function getPaises(e){$.get("/pais/obtenerpaises",function(i,t){e(i)})}function getCondicionMigratoria(e){$.get("/listacondicionmigratoria",function(i,t){e(i)})}function getDepartamentos(e){$.get("/departamento/obtenerdepartamento",function(i,t){e(i)})}function habilitaOtroCampoDesdeSelect(e,i){for(let t=0;t<e.length;t++)$(e[t]).change(function(e){const t=$(this).attr("targetOtro");let o=$(this).parent().parent().parent().find(`input.${t}`);0!=o.length?e.target.value==i?$(o).prop("disabled",!1):($(o).prop("disabled",!0),$(o).val(null)):console.log("no se encotro el input")})}function habilitaOtraCondicionMigratoria(e){for(let i=0;i<e.length;i++)$(e[i]).change(function(e){let i=$(this).parent().parent().parent().find("input.otraCoMi");8==e.target.value?i[0].disabled=!1:(i[0].disabled=!0,$(i[0]).val(null))})}function habilitaPaisPasaporte(e){for(let i=0;i<e.length;i++)$(e[i]).change(function(e){console.log("cambiando dpi o pasaporte");let i=$(this).parent().parent().parent();console.log($(i).index());let t=$(i).find("select.emicionPasaporte"),o=$(i).find("input.noDocIdentificacion");"P"==e.target.value?(t[0].disabled=!1,o[0].disabled=!1):(t[0].disabled=!0,o[0].disabled=!1,cargarPais(t))})}function templateEntidad(e){return templateFormGroup($(`<label for="entidad${e}">Entidad</label>\n                   <input name="entidad${e}" id="entidad${e}" type="text" class="form-control" placeholder="Entidad ..." maxlength="400" required>`))}function templatePuestoDesempenia(e){return templateFormGroup($(`<label for="puestoDesepenia${e}">Puesto que desempeña</label>\n                   <input name="puestoDesepenia${e}" id="puestoDesepenia${e}" type="text" class="form-control" placeholder="Puesto que desempeña ..." maxlength="200" required>`))}function templateOrigenRiqueza(e){let i=$(`\n                    <label for= "origenRiqueza${e}">Origen o procedencia de su riqueza</label>\n                    <select name="origenRiqueza${e}" id="origenRiqueza${e}" class="form-control custom-select select2 origenRiqueza" style="width: 100%;" required>\n                        <option value="" disabled selected>Selecciona</option>\n                        <option value="1">Bienes muebles e inmuebles por herencia</option>\n                        <option value="2">Bienes muebles e inmuebles</option>\n                        <option value="3">Negocio propio</option>\n                        <option value="4">Servicios profesionales</option>\n                        <option value="5">Préstamos bancarios</option>\n                        <option value="6">Trabajos anteriores</option>\n                        <option value="7">Trabajo actual</option>\n                        <option value="8">otro</option>\n                    </select>`);i=templateFormGroup(i);let t=$(i).find(`select#origenRiqueza${e}`);return $(t).select2(),habilitaOtroOrigenriqueza(t),i}function templateOtroOrigenRiqueza(e){return templateFormGroup($(`\n                    <label id="otroOrigenRiqueza${e}">Especifique</label>\n                    <input name="otroOrigenRiqueza${e}" id="otroOrigenRiqueza${e}" type="text" class="form-control otroOrigenRiqueza" placeholder="Origen o procedencia de su riqueza ..." maxlength="100" required disabled>`))}function verificarPersonaPep(e){for(let i=0;i<e.length;i++)$(e[i]).change(function(){let e=$(this).attr("name");const i=templateEntidad(e),t=templatePuestoDesempenia(e),o=templatePais(`paisEntidad${e}`,"País entidad",!1,"otroOrigenRiqueza",!1),n=templateOrigenRiqueza(e),a=templateOtroOrigenRiqueza(e);if("N"!=$(this).val()){var r=$('<div class="row"></div>');$(r).append(i),$(r).append(t),$(`.datos${e}`).append(r);var l=$('<div class="row"></div>');$(l).append(o),$(l).append(n),$(l).append(a),$(`.datos${e}`).append(l)}else $(`.datos${e} div`).remove()})}function habilitaOtroOrigenriqueza(e){for(let i=0;i<e.length;i++)$(e[i]).change(function(e){let i=$(this).parent().parent().parent().find("input.otroOrigenRiqueza");8==e.target.value?i[0].disabled=!1:(i[0].disabled=!0,$(i[0]).val(null))})}function eliminarTemplateNacionalidad(e){$(e).find("button").click(function(){$(this).parent().parent().parent().remove()})}function agregarTemplateNacionalidad(e){for(let i=0;i<e.length;i++)$(e[i]).click(function(){let e=$(this).parent().parent(),i=$(e).attr("id"),t=$(e).attr("cantidad"),o=`${i}_${++t}`;$(`#${i}>div:nth-last-child(2)`).after(`<div class='form-group'>\n                            <div class="row">\n                                <div class="col-sm">\n                                    <select name="${i}" id="${o}" class="form-control custom-select nacionalidad select2" style="width: 100%" required>\n                                        <option value="" disabled selected>Selecciona</option>\n                                    </select>\n                                </div>\n                                <div class="col-sm my-auto">\n                                    <button type="button" class="btn btn-danger">Borrar</button>\n                                </div>\n                            </div>\n                        </div>`),$(e).attr("cantidad",t),eliminarTemplateNacionalidad(`#${i}>div.form-group>div.row`);let n=$(`#${i}>div.form-group>div.row`).find(`select#${o}`);$(n).select2(),cargarPais(n)})}function eliminarTemplateTelefono(e){$(e).find("button").click(function(){$(this).parent().parent().parent().remove()})}function agregarTemplateTelefono(e){for(let i=0;i<e.length;i++)$(e[i]).click(function(){let e=$(this).parent().parent(),i=$(e).attr("id"),t=$(e).attr("cantidad"),o=templateTelefono(`${i}_${++t}`,!0);$(`#${i}>div:nth-last-child(2)`).after(o),$(o).find("input").focus(),$(e).attr("cantidad",t),eliminarTemplateTelefono($(`#${i}>div.form-group>div.row`))})}function templateParentesco(e){let i=` <label for="parentesco${e}">Parentesco</label>\n                <select name="parentesco${e}" id="parentesco${e}" class="form-control custom-select parentesco select2" targetOtro="otroParentesco" style="width: 100%" required>\n                    <option value="" disabled selected>Selecciona</option>\n                    <option value="1">Padre</option>\n                    <option value="2">Madre</option>\n                    <option value="3">Hijo</option>\n                    <option value="4">Hermano</option>\n                    <option value="5">Cónyuge</option>\n                    <option value="6">Otro</option>\n                </select>`;i=templateFormGroup(i);const t=$(i).find(`select#parentesco${e}`);return $(t).select2(),habilitaOtroCampoDesdeSelect(t,6),i}function templateMotivoAsociacion(e){let i=`  <label for="motivoAsociacion${e}">Motivo asociación</label>\n                <select name="motivoAsociacion${e}" id="motivoAsociacion${e}" class="form-control custom-select motivoAsociacion select2" targetOtro="otroMotivoAsociacion" style="width: 100%" required>\n                    <option value="" disabled selected>Selecciona</option>\n                    <option value="1">Profesionales</option>\n                    <option value="2">Políticos</option>\n                    <option value="3">Comerciales</option>\n                    <option value="4">Negocios</option>\n                    <option value="5">Otros</option>\n                </select>`;i=templateFormGroup(i);const t=$(i).find(`select#motivoAsociacion${e}`);return $(t).select2(),habilitaOtroCampoDesdeSelect(t,5),i}function templateCondicion(e){let i=`<label for="condicion${e}">Condición</label>\n                <select name="condicion${e}" id="condicion${e}" class="form-control custom-select select2" style="width: 100%" required>\n                    <option value="">Selecciona</option>\n                    <option value="N">Nacional</option>\n                    <option value="E">Extranjero</option>\n                </select>`;return i=templateFormGroup(i),$(i).find("select").select2(),i}function templateRowUnoAsoPep(e){let i=$('<div class="row"><div>');const t=templateParentesco(e),o=templateInputText(e,"otroParentesco",100,"Especifique",!0,!0),n=templateMotivoAsociacion(e),a=templateInputText(e,"otroMotivoAsociacion",100,"Especifique",!0,!0),r=templateSexo(e),l=templateCondicion(e);return $(i).append(t),$(i).append(o),$(i).append(n),$(i).append(a),$(i).append(r),$(i).append(l),i}function templateRowTresAsoPep(e){const i=templateEntidad(e),t=templateInputText(e,"puestoDesempenia",200,"Puesto que desempeña",!0,!1),o=templatePais(`pais${e}`,"País de la institución o entidad",!1);let n=$('<div class="row"><div>');return $(n).append(i),$(n).append(t),$(n).append(o),n}function agregaAsoPep(e){let i=$(`#datos${e}>div.info`).attr("cantidad"),t=`${e}_${++i}`,o=templateCamposNommbres(t),n=$(` <div class="card card-primary" id=${t}>\n                                <div class="card-header">\n                                    <h3 class="card-title">Familiar Asociado ${i}</h3>\n                                    <div class="card-tools">\n                                    <button type="button" class="btn btn-tool" data-card-widget="remove">\n                                        <i class="fas fa-times"></i>\n                                    </button>\n                                </div>\n                                </div>\n                                <div class="card-body"></div>\n                                </div>`);const a=templateRowUnoAsoPep(t),r=templateRowTresAsoPep(t);$(n).find("div.card-body").append(a),$(n).find("div.card-body").append(o),$(n).find("div.card-body").append(r),$(`#datos${e}>div.info`).attr("cantidad",i),$(`#datos${e}>div.info`).append(n),$(`#datos${e}>div.info`).find(`select#parentesco${t}`).focus()}function btnaddfamasopep(e){$(e).click(function(){agregaAsoPep($(this).attr("name"))})}function verificarAsoPep(e){for(let i=0;i<e.length;i++)$(e[i]).change(function(){let e=$(this).attr("name");if("N"!=this.value){let i=`\n                                <div class="row">\n                                    <div class="col-sm">\n                                        <div class="form-group">\n                                            <button type="button" class="btn btn-primary agregarFamiliarAsociado" id="agregarFamiliarAsociadoPep${e}">\n                                                Agregar Familiar/Asociado PEP\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>`;$(`#datos${e}>div.btnadd`).append(i),agregaAsoPep(e),$(`#datos${e}`).find("button.agregarFamiliarAsociado").click(function(){agregaAsoPep(e)})}else $(`#datos${e}>div.btnadd`).children().remove(),$(`#datos${e}>div.info`).children().remove()})}function validarTipoFuenteIngreso(e){$(e).change(function(){let e=$(this).parent().parent().parent(),i=$(e).find("label"),t=$(e).find("input");switch($(t).prop("disabled",!1),$(this).val()){case"NP":$(i).text("Nombre comercial"),$(t).attr("placeholder","Nombre comercial ...").attr("maxlength","400").attr("name","nombreComercial");break;case"RD":$(i).text("Nombre empleador"),$(t).attr("placeholder","Nombre empleador ...").attr("maxlength","200").attr("name","nombreEmpleador");break;case"OI":$(i).text("Otras fuentes de ingreso"),$(t).attr("placeholder","Otra fuente ...").attr("maxlength","400").attr("name","otrasFuentesIngresos")}})}function agregarTemplateFuenteIngresos(e){console.log("agregando fuente de ingresos"),$(e).click(function(){const e=$(this).parent().parent().parent().attr("id"),i=$(`div#${e} >div:nth-child(2)`),t=$(i).attr("id");let o=$(i).attr("cantidad"),n=templateCamposFuenteIngreso(t,++o);$(i).append(n),$(i).attr("cantidad",o)})}function templateCalidadActua(e,i){"OtrosFirmantes"==i&&(i="otros firmantes");let t=$(`\n                    <div class="row mb-3"><h4>I. TIPO DE ACTUACIÓN DEL ${i.toUpperCase()}</h4></div>\n                    <div class="row">\n                        <div class="col-sm-4">\n                            <div class="form-check">\n                                <div>\n                                    <label>El cliente actúa en nombre propio <span>*</span></label>\n                                </div>\n                                <div class="icheck-primary d-inline">\n                                    <input type="radio" id="siActua${e}" class="actuaNombrePropio form-check-input" name="tipoActuacion${e}" value="C" required/>\n                                    <label for="siActua${e}">Sí</label>\n                                </div>\n                                <div class="icheck-primary d-inline">\n                                    <input type="radio" id="noActua${e}" class="actuaNombrePropio form-check-input" name="tipoActuacion${e}" value="R" required />\n                                    <label for="noActua${e}">No</label>\n                                    <div class="invalid-tooltip">Indica el tipo de actuación</div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="col-sm-8">\n                            <div class="form-group">\n                                <label for ="calidadActua${e}" >Calidad con que actúa <span class="oculto">*</span></label>\n                                <input name="calidadActua${e}" id="calidadActua${e}" type="text" class="form-control calidadActuaCliente" placeholder="Calidad con que actúa ..." maxlength="100" disabled />\n                                <div class="invalid-tooltip">Por Ejemplo: Mandatario, Patria potestad, Tutor, Otros.</div>\n                            </div>\n                        </div>\n                    </div>`);return verificaActuaNombrePropio($(t).find("input.actuaNombrePropio")),t}function templateLugarCM(e){let i=$('   <div class="row lugarFecha">\n                                <div class="col-sm-12 mb-3">\n                                    <h4>II. LUGAR Y FECHA</h4>\n                                </div>\n                            </div>'),t=templatePais(`paisCaMi${e}`,"País",!0);$(i).append(t);let o=templateDepartamento(`CaMi${e}`,"Departamento");$(i).append(o);let n=templateMunicipio(`CaMi${e}`,"Municipio");$(i).append(n);let a=templateFecha(e,"DocCaMi","");return $(i).append(a),i}function templateCamposMinimos(e,i,t){let o=$(`\n                <div class="card card-primary" id="${e}">\n                    <div class="card-header">\n                        <h3 class="card-title">${t} ${i}</h3>\n                        <div class="card-tools">\n                            <button type="button" class="btn btn-tool" data-card-widget="collapse">\n                                <i class="fas fa-minus"></i>\n                            </button>\n                            <button type="button" class="btn btn-tool" data-card-widget="remove">\n                                <i class="fas fa-times"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="card-body">\n                    </div>\n                </div>\n                `);eliminarCard($(o));let n=$(o).find("div.card-body");$(n).append(templateCalidadActua(e,t)),$(n).append(templateLugarCM(e));let a=$(`<div id="camposMinimos${e}"></div>`),r=templateDatosPersonales(e,"cliente");if($(a).append(r),$(n).append(a),"OtrosFirmantes"!=t){let i=$(`<div id="informacionEconomicaIncial${e}"></div>`);$(i).append(templateInformacionEconomicaInicial(e)),$(n).append(i)}let l=$(`<div id="representante${e}"></div>`);return $(n).append(l),o}function agregarCamposMinimos(e,i){let t=$(i).attr("cantidad"),o=`${e}_${++t}`,n=templateCamposMinimos(o,t,e);$(i).append(n),$(`#${o}`).find(`input#siActua${o}`).focus(),$(i).attr("cantidad",t)}function AgregarTitular(){$("#btnAgregarTitular").click(function(e){e.preventDefault(),e.stopPropagation(),agregarCamposMinimos("Titular","div#titulares")})}function agregarProductoServicio(e){$(e).click(function(e){e.preventDefault(),e.stopPropagation(),console.log("agregando producto"),$("div.productoServicio").find("button[data-card-widget=collapse]").first().CardWidget("expand");let i=$("div#datosProductoServicio").attr("cantidad"),t=templateProductoServicio(++i);$("div#datosProductoServicio").append(t),$(t).find(`input#fechaProductoServicio_${i}`).focus(),$("div#datosProductoServicio").attr("cantidad",i)})}function templateSelectActualizacion(){let e=$('<label for="actualizacionPet">Tipo ingreso</label>\n                  <select name="actualizacionPet" id="actualizacionPet" class="form-control custom-select actualizacionPet select2" style="width: 100%" required>\n                    <option value="" disabled selected>Selecciona</option>\n                    <option value="I">Perfil inicial</option>\n                    <option value="A">Actualización de perfil</option>\n                  </select>');return e=templateFormGroup(e),$(e).find("select").select2(),e}function templateNombreComercial(e){let i=$('<div class="row"></div>');const t=templateInputText(e,"nombreComercial",400,"Nombre comercial",!0,!1);return $(i).append(t),i}function templateRowDosNegocioPropioPet(e){let i=$('<div class="row"></div>');const t=templateInputText(e,"principalActividadEconomica",200,"Principal actividad económica",!0,!1),o=templateFecha(e,"InscripcionNegocio","de inscripción del negocio","col-sm-3",!1);return $(i).append(t),$(i).append(o),i}function templateInputNumber(e,i,t,o,n,a){let r=$(`<label>${o}</label>\n                   <input name="${i}${e}" id="${i}${e}" type="number" class="form-control ${i}" placeholder="${o} ..." min="1" max="999999999999999" maxlength="${t}"/>`);return r=templateFormGroup(r),!0===n&&$(r).find(`input#${i}${e}`).prop("required",!0),!0===a&&$(r).find(`input#${i}${e}`).prop("disabled",!0),r}function templatePantenteComercio(e){let i=$('<div class="row"></div>');$(i).append(templateFormGroup("<h2>Patente de comercio de empresa</h2>","col-sm-12"));const t=templateInputNumber(e,"numeroRegistro",15,"Número de registro",!1,!1),o=templateInputNumber(e,"folio",15,"Folio",!1,!1),n=templateInputNumber(e,"libro",15,"Libro",!1,!1);return $(i).append(t),$(i).append(o),$(i).append(n),i}function templateCamposLugarPet(e){let i=templatePais(`paisPet${e}`,"País",!0),t=templateDepartamento(`Pet${e}`,"Departamento"),o=templateMunicipio(`Pet${e}`,"Municipio"),n=$('<div class="row"></div>');return $(n).append(i),$(n).append(t),$(n).append(o),n}function templateMontoAproximado(e,i){let t=$(`<label>${i}</label>\n                <input type="number" name = "montoAproximado" class="form-control d-inline montoAproximado" placeholder="0.00"  min="0" step=".01" style="text-align:right;" required/>`);return t=templateFormGroup(t,"col-sm-3")}function templateCamposMonto(e,i){const t=templateMoneda(e),o=templateMontoAproximado(e,i);let n=$('<div class="row"></div>');return $(n).append(t),$(n).append(o),n}function templatePerfilnegocioPropio(e){const i=templateNombreComercial(e),t=templateRowDosNegocioPropioPet(e),o=templatePantenteComercio(e),n=templateDireccion(e,"Dirección negocio","Negocio"),a=templateCamposLugarPet(e),r=templateCamposMonto(e,"Monto aproximado ingresos");let l=$(`\n                <div class="card card-info mt-3" id="negocioPropio_${e}">\n                    <div class="card-header">\n                        <h3 class="card-title">Negocio propio ${e}</h3>\n                        <div class="card-tools">\n                            <button type="button" class="btn btn-tool" data-card-widget="collapse">\n                                <i class="fas fa-minus"></i>\n                            </button>\n                            <button type="button" class="btn btn-tool" data-card-widget="remove">\n                                <i class="fas fa-times"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="card-body">\n                    </div>\n                </div>`);return $(l).find("div.card-body").append(i),$(l).find("div.card-body").append(t),$(l).find("div.card-body").append(o),$(l).find("div.card-body").append(n),$(l).find("div.card-body").append(a),$(l).find("div.card-body").append(r),l}function agregarPerfilEconomicoNegocioPropio(e){$(e).click(function(e){e.preventDefault(),e.stopPropagation();const i=$("div#datosNegocioPropio");let t=$(i).attr("cantidad");t++,$(i).append(templatePerfilnegocioPropio(t)),$(i).find(`input#nombreComercial${t}`).focus(),$(i).attr("cantidad",t)})}function templateContenedorNegocioPropio(){let e=$('<div class="row">\n                    <div class="datosNegocioPropio col-sm-12" id="datosNegocioPropio" cantidad="0"></div>\n                    <div class="form-group">\n                        <button type="button" id="agregarNegocioPropio" class="btn btn-primary agregarNegocioPropio">Agregar negocio propio</button>\n                    </div>\n                  </div>');return agregarPerfilEconomicoNegocioPropio($(e).find("button#agregarNegocioPropio")),e}function templateSelectSector(e){let i=$(`<label for="sectorPet">Sector</label>\n                  <select name="sectorPet" id="sectorPet${e}" class="form-control custom-select sector select2" style="width: 100%" required>\n                    <option value="" disabled selected>Selecciona</option>\n                    <option value="PU">Sector Público</option>\n                    <option value="PR">Sector Privado</option>\n                  </select>`);return i=templateFormGroup(i,"col-sm-2"),$(i).find("select").select2(),i}function templateFilaUnord(e){const i=templateSelectSector(e),t=templateInputText(e,"NombreEmpleador",200,"Nombre del empleador",!0);let o=$('<div class="row"></div>');return $(o).append(i),$(o).append(t),o}function templateFilaDosrd(e){const i=templateInputText(e,"prinActiEcoEmple",200,"Principal actividad económica empleador",!0,!1),t=templateInputText(e,"puestoDesempenia",200,"Puesto que desempeña",!0,!1);let o=$('<div class="row"></div>');return $(o).append(i),$(o).append(t),o}function templateCamposLugarRd(e){let i=templatePais(`paisRd${e}`,"País",!0),t=templateDepartamento(`Rd${e}`,"Departamento"),o=templateMunicipio(`Rd${e}`,"Municipio"),n=$('<div class="row"></div>');return $(n).append(i),$(n).append(t),$(n).append(o),n}function templateRelacionDependencia(e){const i=templateFilaUnord(e),t=templateFilaDosrd(e),o=templateCamposMonto(e,"Monto aproximado ingresos"),n=templateDireccion(e,"Dirección empleador","Empleador"),a=templateCamposLugarRd(e);let r=$(`\n                <div class="card card-info mt-3" id="relacoinDependencia_${e}">\n                    <div class="card-header">\n                        <h3 class="card-title">Relación de dependencia ${e}</h3>\n                        <div class="card-tools">\n                            <button type="button" class="btn btn-tool" data-card-widget="collapse">\n                                <i class="fas fa-minus"></i>\n                            </button>\n                            <button type="button" class="btn btn-tool" data-card-widget="remove">\n                                <i class="fas fa-times"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="card-body">\n                    </div>\n                </div>`);return $(r).find("div.card-body").append(i),$(r).find("div.card-body").append(t),$(r).find("div.card-body").append(n),$(r).find("div.card-body").append(a),$(r).find("div.card-body").append(o),r}function agregarPerfilEconomicoRelacionDependencia(e){$(e).click(function(e){e.preventDefault(),e.stopPropagation();const i=$("div#datosRelacionDependencia");let t=$(i).attr("cantidad");t++,$(i).append(templateRelacionDependencia(t)),$(i).find("select.sector").focus(),$(i).attr("cantidad",t)})}function templateContenedorRelacionDependencia(){let e=$('<div class="row">\n                    <div class="datosRelacionDependencia col-sm-12" id="datosRelacionDependencia" cantidad="0"></div>\n                    <div class="form-group">\n                        <button type="button" id="agregarRelacionDependencia" class="btn btn-primary agregarRelacionDependencia">Agregar Relación de Dependencia</button>\n                    </div>\n                  </div>');$(e).find("div#datosRelacionDependencia");return agregarPerfilEconomicoRelacionDependencia($(e).find("button#agregarRelacionDependencia")),e}function templateSelectOtrosIngresos(e){let i=$(`<label for="tipoOtrosIngresosPet">Tipo de ingreso</label>\n                  <select name="tipoOtrosIngresosPet" id="tipoOtrosIngresosPet${e}" class="form-control custom-select tipoOtrosIngresos select2" style="width: 100%" required>\n                    <option value="" disabled selected>Selecciona</option>\n                    <option value="1">Actividades profecionales</option>\n                    <option value="2">Manutención</option>\n                    <option value="3">Rentas</option>\n                    <option value="4">Jubilación</option>\n                    <option value="5">Otra</option>\n                  </select>`);return i=templateFormGroup(i,"col-sm-2"),$(i).find("select").select2(),i}function templateRowUnoOtrosIngresos(e){const i=templateSelectOtrosIngresos(e),t=templateInputText(e,"DetalleOtrosIngresos",400,"Especificar otra fuente de ingresos",!0,!1);let o=$('<div class="row"></div>');return $(o).append(i),$(o).append(t),o}function templateOtrosIngresos(e){const i=templateRowUnoOtrosIngresos(e),t=templateCamposMonto(e,"Monto aproximado ingresos");let o=$(`\n                <div class="card card-info mt-3" id="otrosIngresos_${e}">\n                    <div class="card-header">\n                        <h3 class="card-title">Otros ingreso ${e}</h3>\n                        <div class="card-tools">\n                            <button type="button" class="btn btn-tool" data-card-widget="collapse">\n                                <i class="fas fa-minus"></i>\n                            </button>\n                            <button type="button" class="btn btn-tool" data-card-widget="remove">\n                                <i class="fas fa-times"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="card-body">\n                    </div>\n                </div>`);return $(o).find("div.card-body").append(i),$(o).find("div.card-body").append(t),o}function agregarTemplateOtrosIngresos(e){$(e).click(function(e){e.preventDefault(),e.stopPropagation();const i=$("div#datosOtrosIngresos");let t=$(i).attr("cantidad");t++,$(i).append(templateOtrosIngresos(t)),$(i).find("select.tipoOtrosIngresos").focus(),$(i).attr("cantidad",t)})}function templateContenedorOtrosIngresos(){let e=$('<div class="row">\n                    <div class="datosOtrosIngresos col-sm-12" id="datosOtrosIngresos" cantidad="0"></div>\n                    <div class="form-group">\n                        <button type="button" id="agregarOtrosIngresos" class="btn btn-primary agregarOtrosIngresos">Agregar Otros Ingresos</button>\n                    </div>\n                  </div>');$(e).find("div#datosOtrosIngresos");return agregarTemplateOtrosIngresos($(e).find("button#agregarOtrosIngresos")),e}function templateFinaUnoPerfilEconomicoTransaccional(){const e=templateSelectActualizacion(),i=templateFecha("","Pet","");let t=$('<div class="row"></div>');return $(t).append(e),$(t).append(i),t}function templateRowUnoPSperfilTransaccional(e){const i=templateFecha(e,"Pspt","de elaboración del perfil","col-sm-3",!0),t=templateInputText(e,"productoServicioPspt",100,"Producto y/o servicio",!0,!1);let o=$('<div class="row"></div>');return $(o).append(i),$(o).append(t),o}function borrarUbicacionGeografica(e){$(e).click(function(e){e.preventDefault(),e.stopPropagation(),console.log($(this).parent().parent().remove())})}function templateCamposLugarUbigeo(e,i){let t=templatePais(`paispug${e}`,"País",!0),o=templateDepartamento(`pug${e}`,"Departamento"),n=templateMunicipio(`pug${e}`,"Municipio"),a=$('<div class="col-sm-1 my-auto btnborrar"></div>'),r=$('<div class="row"></div>');if($(r).append(t),$(r).append(o),$(r).append(n),i){const e=$('<button type="button" class="btn btn-danger btnUbicacionGeografica mt-3">Borrar</button>');borrarUbicacionGeografica(e),$(a).append(e)}return $(r).append(a),r}function agregarPUG(e){$(e).click(function(e){e.preventDefault(),e.stopPropagation();const i=$(this).parent().parent().parent().find("div#ubicacionesGeoraficas");let t=$(i).attr("cantidad"),o=$(i).attr("idug");t++,$(i).append(templateCamposLugarUbigeo(`${o}${t}`,!0)),$(i).find("select.pais").focus(),$(i).attr("cantidad",t)})}function templateProductoServicioPerfilTransaccional(e){const i=templateRowUnoPSperfilTransaccional(e),t=templateCamposMonto(e,"Monto promedio mensual (6 meses)"),o=templateCamposLugarUbigeo(`${e}1`),n=$(`<h4>Principales ubicaciones geográficas</h4>\n                                 <div id="ubicacionesGeoraficas" idug=${e} cantidad="1"></div>\n                                 <div class="row">\n                                <div class="col clearfix">\n                                <button class="btn btn-primary float-right mb-4 agregarUbicacionGeo" id="agregarUbicacionGeo${e}">Agregar ubicación</button>\n                                </div>\n                                </div>`);let a=$(`\n                <div class="card card-info mt-3" id="otrosIngresos_${e}">\n                    <div class="card-header">\n                        <h3 class="card-title">Producto del perfil transaccional ${e}</h3>\n                        <div class="card-tools">\n                            <button type="button" class="btn btn-tool" data-card-widget="collapse">\n                                <i class="fas fa-minus"></i>\n                            </button>\n                            <button type="button" class="btn btn-tool" data-card-widget="remove">\n                                <i class="fas fa-times"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="card-body">\n                    </div>\n                </div>`);return $(a).find("div.card-body").append(i),$(a).find("div.card-body").append(t),$(a).find("div.card-body").append(n),$(a).find("div#ubicacionesGeoraficas").append(o),agregarPUG($(a).find("button.agregarUbicacionGeo")),a}function agregarTemplatePerfilTransaccional(e){$(e).click(function(){let e=$("div#datosPerfilTransaccional"),i=$(e).attr("cantidad");const t=templateProductoServicioPerfilTransaccional(++i);$(e).append(t),$(e).find("input.Pspt").focus(),$(e).attr("cantidad",i)})}function templatePerfiltransaccional(){let e=$('\n                <div class="card card-primary mt-3" id="perfilTransaccional">\n                    <div class="card-header">\n                        <h3 class="card-title">PERFIL TRANSACCIONAL</h3>\n                        <div class="card-tools">\n                            <button type="button" class="btn btn-tool" data-card-widget="collapse">\n                                <i class="fas fa-minus"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="card-body">\n                <div class="row">\n                    <div class="datosPerfilTransaccional col-sm-12" id="datosPerfilTransaccional" cantidad="0"></div>\n                    <div class="form-group">\n                            <button type="button" id="agregarPerfilTransaccional" class="btn btn-primary agregarOtrosIngresos mt-3">Agregar Producto y/o Servicio Perfil Transaccinal</button>\n                    </div>\n                  </div>\n                    </div>\n                </div>');return agregarTemplatePerfilTransaccional($(e).find("button#agregarPerfilTransaccional")),$(e)}function agregarPerfilEconomico(e){$(e).click(function(e){e.preventDefault(),e.stopPropagation(),console.log("agregando perfil economico"),$("div#perfilEconomicoTransaccional").find("button[data-card-widget=collapse]").first().CardWidget("expand");const i=templateFinaUnoPerfilEconomicoTransaccional(),t=templateContenedorNegocioPropio(),o=templateContenedorRelacionDependencia(),n=templateContenedorOtrosIngresos(),a=templatePerfiltransaccional();let r=$("div#perfilEconomicoTransaccional").find("div.card-body");$(r).append(i),$(r).append($('<div class="row"><h2>FUENTE DE INGRESOS</h2></div>')),$(r).append(t),$(r).append(o),$(r).append(n),$(r).append(a),$(this).remove()})}class dicLugar{constructor(){this.pais=null,this.departamento=null,this.municipio=null}}class datosPep{constructor(e){this.idDatosPep=e,this.entidad=null,this.puestoDesempenia=null,this.paisEntidad=null,this.origenRiqueza=null,this.otroOrigenRiqueza=null}}class dicParienteAsociadoPep{constructor(e){this.idDatosParienteAsociadoPep=e,this.parentesco=null,this.otroParentesco=null,this.motivoAsociacion=null,this.otroMotivoAsociacion=null,this.primerApellido=null,this.segundoApellido=null,this.apellidoCasada=null,this.primerNombre=null,this.segundoNombre=null,this.otrosNombres=null,this.sexo=null,this.condicion=null,this.entidad=null,this.puestoDesempenia=null,this.paisEntidad=null}}class dicDatosPersonales{constructor(e){this.idDatosPersonales=e,this.primerApellido=null,this.segundoApellido=null,this.apellidoCasada=null,this.primerNombre=null,this.segundoNombre=null,this.otrosNombres=null,this.fechaNacimiento=null,this.nacionalidades=new Array,this.nacimiento=new dicLugar,this.condicionMigratoria=null,this.otraCondicionMigratoria=null,this.sexo=null,this.estadoCivil=null,this.profesionOficio=null,this.tipoDocumentoIdentificacion=null,this.numeroDocumentoIdentificacion=null,this.emisionPasaporte=null,this.nit=null,this.telefonos=new Array,this.email=null,this.direccionResidencia=null,this.residencia=new dicLugar,this.pep=null,this.datospep=new datosPep,this.parienteAsociadoPep=null,this.datosParienteAsociadoPep=new Array,this.cpe=null}agregarTelefono(e){this.telefonos.push(e)}agregarNacionalidad(e){this.nacionalidades.push(e)}agregarParienteAsociadoPep(e){this.datosParienteAsociadoPep.push(e)}}class informacionNegocioPropio{constructor(e){this.idNombreComercial=e,this.nombreComercial=null}}class informacionNombreEmpleador{constructor(e){this.idNombreEmpleador=e,this.nombreEmpleador=null}}class informacionOtrosIngresos{constructor(e){this.idOtrasFuentesIngreso=e,this.otrasFuentesIngreso=null}}class informacionEconomicaInicial{constructor(e){this.idInformacionEconomicaInicial=e,this.montoIngresos=null,this.negocioPropio=new Array,this.relacionDependencia=new Array,this.otrosIngresos=new Array,this.propositoRC=null}agregarNegocioPropio(e){this.negocioPropio.push(e)}agregarRelacionDependencia(e){this.relacionDependencia.push(e)}agregarotrosIngresos(e){this.otrosIngresos.push(e)}}class dicCamposMinimos{constructor(e){this.idCamposMinimos=e,this.tipoActuacion=null,this.calidadActua=null,this.lugar=new dicLugar,this.fecha=null,this.cliente=new dicDatosPersonales,this.representante=new dicDatosPersonales,this.infoEconomicaInical=new informacionEconomicaInicial}}class dicProductoServicio{constructor(e){this.idProductoServicio=e,this.lugar=new dicLugar,this.fecha=null,this.tipo=null,this.nombre=null,this.descripcion=null,this.identificador=null,this.nombreContrata=null,this.moneda=null,this.valor=null,this.otrosFirmantes=new Array,this.beneficiarios=new Array}agregarBeneficiario(e){this.beneficiarios.push(e)}}class dicPerfilEconomicoNegocioPropio{constructor(e){this.idDiccionarioPerfilEconomicoNegocioPropio=e,this.nombreComercial=null,this.principalActividadEconomica=null,this.fechaInscripcionNegocio=null,this.numeroRegistro=null,this.folio=null,this.libro=null,this.direccionNegocio=null,this.lugar=new dicLugar,this.tipoMoneda=null,this.montoAproximado=null}}class dicPerfilEconomicoRelacionDependencia{constructor(e){this.idPerd=e,this.sector=null,this.nombreEmpleador=null,this.priActEcoE=null,this.puestoDesempenia=null,this.direccionEmpleador=null,this.lugar=new dicLugar,this.tipoMoneda=null,this.montoAproximado=null}}class dicPerfilEconomicoOtrosIngresos{constructor(e){this.idOI=e,this.tipoOI=null,this.detalleOI=null,this.tipoMoneda=null,this.montoAproximado=null}}class dicPerfilTransaccional{constructor(e){this.iddpet=e,this.fecha=null,this.productoServicio=null,this.tipoMoneda=null,this.montoPromedioMensual=null,this.pubGeo=new Array}}class dicPerfilEconomicoTransaccional{constructor(e){this.idPerfilEconomicoTransaccional=e,this.actualizacion=null,this.fecha=null,this.negocioPropio=new Array,this.relacionDependencia=new Array,this.otrosIngresos=new Array,this.perfilTransaccional=new Array}agregarNegocioPropio(e){this.negocioPropio.push(e)}agregarRelacionDependencia(e){this.relacionDependencia.push(e)}agregarotrosIngresos(e){this.otrosIngresos.push(e)}agregarPerfilTransaccional(e){this.perfilTransaccional.push(e)}}class diccionarioFormulario{constructor(e){this.iddiccionarioFormulario=e,this.titulares=new Array,this.productos=new Array,this.perfilEconomico=new Object}agregarTitular(e){this.titulares.push(e)}agregarPoductoServicio(e){this.productos.push(e)}agregarPerfilEconomico(e){this.perfilEconomico=e}}function expandirCard(){let e=$("#titulares>div").find("button[data-card-widget=collapse]");for(let i=0;i<e.length;i++)$(e[i]).CardWidget("expand");$("div.productoServicio").find("button[data-card-widget=collapse]").each(function(){$(this).CardWidget("expand")}),$("form#diccionarioFormulario>div").find("button[data-card-widget=collapse]").each(function(){$(this).CardWidget("expand")})}function mostrarModal(){$("#myModal").modal({backdrop:"static",keyboard:!1})}function validarFormulario(){var e=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(e,function(e){e.addEventListener("submit",function(i){i.preventDefault(),i.stopPropagation(),expandirCard(),!1===e.checkValidity()?(e.classList.add("was-validated"),alert("No se puede guardar el formulario, verifica los campos"),$(e).find(".form-control:invalid").first().focus(),$(e).find(".form-check-input:invalid").first().focus(),$(this).find("button#btnGuardar").prop("disabled",!1),$(this).find("button#btnGuardar").html("Guardar formulario")):(console.log("enviando formulario"),$(this).find("button#btnGuardar").prop("disabled",!0),$(this).find("button#btnGuardar").html(""),$(this).find("button#btnGuardar").append('\n                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n                        Guardando formulario...\n                         '),enviarDatos())},!1)})}function enviarDatos(){let e=obtenerDatos();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:"/oficios/7122020/guardarActualizar",data:e,dataType:"json",success:function(e){if(console.log("respuesta del servidor"),"Success"==e.Status){console.log(e),console.log("redireccionando....");const i="/oficios/7122020";$(location).attr("href",i)}else console.log(e),alert("Ocurrió un error al guardar el formulario, intenta de nuevo"),$("button#btnGuardar").prop("disabled",!1),$("button#btnGuardar").html("Guardar formulario")},error:function(e,i){var t="";t=0===e.status?"Not connect.\n Verify Network.":404==e.status?"Requested page not found. [404]":500==e.status?"Internal Server Error [500].":"parsererror"===i?"Requested JSON parse failed.":"timeout"===i?"Time out error.":"abort"===i?"Ajax request aborted.":"Uncaught Error.\n"+e.responseText,alert(t)}})}function eliminarCard(e){for(let i=0;i<e.length;i++)$(e[i]).on("removed.lte.cardwidget",function(e){let i=$(e.target).parent().parent().parent();$(i).remove()})}function obtenerDiccionarioCamposMinimos(e){let i=new Array;return $(e).each(function(){let e=$(this).attr("id"),t=$(this).attr("idCamposMinimos"),o=new dicCamposMinimos(t);if(o.tipoActuacion=$(this).find(`input:radio[name=tipoActuacion${e}]:checked`).val(),"R"===o.tipoActuacion){o.calidadActua=$(this).find(`input:text[id=calidadActua${e}]`).val();let i=$(this).find(`div#representante${e}`);const t=$(`div#representante${e}`).attr("idrepresentante");o.representante=obtenerDatosPersonales(i,`Representante${e}`,t)}else o.representante=null;o.lugar.pais=$(this).find(`select[id=paisCaMi${e}] option:selected`).val(),"1"===o.lugar.pais&&(o.lugar.departamento=$(this).find(`select[id=deptoCaMi${e}] option:selected`).val(),o.lugar.municipio=$(this).find(`select[id=muniCaMi${e}] option:selected`).val()),o.fecha=$(this).find(`input:text[id=fechaDocCaMi${e}]`).val();let n=$(this).find(`div#camposMinimos${e}`);const a=$(`#camposMinimos${e}`).attr("idatospersonales");o.cliente=obtenerDatosPersonales(n,e,a);const r=$(this).find(`div#informacionEconomicaIncial${e}`),l=$(`#informacionEconomicaIncial${e}`).attr("idinformacioniconomicainicial");o.infoEconomicaInical=obtenerDatosInfoEconomica(r,e,l),i.push(o)}),i}function obtenerDatosPersonales(e,i,t){let o=new dicDatosPersonales(t);o.primerApellido=$(e).find(`input:text[id=primerApellido${i}]`).val(),o.segundoApellido=$(e).find(`input:text[id=segundoApellido${i}]`).val(),o.apellidoCasada=$(e).find(`input:text[id=apellidoCasada${i}]`).val(),o.primerNombre=$(e).find(`input:text[id=primerNombre${i}]`).val(),o.segundoNombre=$(e).find(`input:text[id=segundoNombre${i}]`).val(),o.otrosNombres=$(e).find(`input:text[id=otrosNombres${i}]`).val(),o.fechaNacimiento=$(e).find(`input:text[id=fechaNacimiento${i}]`).val(),o.nacimiento.pais=$(e).find(`select[id=paisNacimiento${i}] option:selected`).val(),o.nacimiento.departamento=$(e).find(`select[id=deptoNacimiento${i}] option:selected`).val(),o.nacimiento.municipio=$(e).find(`select[id=muniNacimiento${i}] option:selected`).val(),o.condicionMigratoria=$(e).find(`select[id=condicionMigratoria${i}] option:selected`).val(),o.otraCondicionMigratoria=$(e).find(`input:text[id=otraCoMi${i}]`).val(),o.sexo=$(e).find(`select[id=sexo${i}] option:selected`).val(),o.estadoCivil=$(e).find(`select[id=estadoCivil${i}] option:selected`).val(),o.nit=$(e).find(`input:text[id=nit${i}]`).val(),o.tipoDocumentoIdentificacion=$(e).find(`select[id=tipoDoctoIdentificacion${i}] option:selected`).val(),o.numeroDocumentoIdentificacion=$(e).find(`input:text[id=noDocIdentificacion${i}]`).val(),o.emisionPasaporte=$(e).find(`select[id=emicionPasaporte${i}] option:selected`).val(),o.profesionOficio=$(e).find(`input:text[id=profecionOficio${i}]`).val(),o.email=$(e).find(`input[id=email${i}]`).val(),o.direccionResidencia=$(e).find(`input:text[id=direccionRecidencia${i}]`).val(),o.residencia.pais=$(e).find(`select[id=paisRecidencia${i}] option:selected`).val(),o.residencia.departamento=$(e).find(`select[id=deptoRecidencia${i}] option:selected`).val(),o.residencia.municipio=$(e).find(`select[id=muniRecidencia${i}] option:selected`).val();let n=$(`div#telefono${i}`).find("input.telefono");for(let e=0;e<n.length;e++)o.agregarTelefono($(n[e]).val());let a=$(`div#nacionalidad${i}`).find("select.nacionalidad");for(let e=0;e<a.length;e++)o.agregarNacionalidad($(a[e]).val());if(o.cpe=$(e).find(`input:radio[name=cpe${i}]:checked`).val(),"S"===(o.pep=$(e).find(`input:radio[name=pep${i}]:checked`).val())){o.datospep.idDatosPep=$(`input[id=idDatosPep${i}]`).val(),o.datospep.entidad=$(e).find(`input[id=entidadpep${i}]`).val(),o.datospep.puestoDesempenia=$(e).find(`input[id=puestoDesepeniapep${i}]`).val(),o.datospep.paisEntidad=$(e).find(`select[id=paisEntidadpep${i}] option:selected`).val(),8==(o.datospep.origenRiqueza=$(e).find(`select[id=origenRiquezapep${i}] option:selected`).val())&&(o.datospep.otroOrigenRiqueza=$(e).find(`input[id=otroOrigenRiquezapep${i}]`).val())}else o.datospep=null;if("S"==(o.parienteAsociadoPep=$(e).find(`input:radio[name=asoPep${i}]:checked`).val())){let t=$(`#datosasoPep${i}>div.info`).children();for(let i=0;i<t.length;i++){let n=$(t[i]).attr("id"),a=$(t[i]).attr("idDatosParienteAsociadoPep"),r=new dicParienteAsociadoPep(a),l=`div#${n}`;r.parentesco=$(l).find(`select#parentesco${n}`).val(),r.otroParentesco=$(l).find(`input#otroParentesco${n}`).val(),r.motivoAsociacion=$(l).find(`select#motivoAsociacion${n}`).val(),r.otroMotivoAsociacion=$(l).find(`input#otroMotivoAsociacion${n}`).val(),r.sexo=$(l).find(`select#sexo${n}`).val(),r.condicion=$(l).find(`select#condicion${n}`).val(),r.primerApellido=$(l).find(`input#primerApellido${n}`).val(),r.segundoApellido=$(l).find(`input#segundoApellido${n}`).val(),r.apellidoCasada=$(l).find(`input#apellidoCasada${n}`).val(),r.primerNombre=$(l).find(`input#primerNombre${n}`).val(),r.segundoNombre=$(l).find(`input#segundoNombre${n}`).val(),r.otrosNombres=$(l).find(`input#otrosNombres${n}`).val(),r.entidad=$(l).find(`input#entidad${n}`).val(),r.puestoDesempenia=$(e).find(`input#puestoDesempenia${n}`).val(),r.paisEntidad=$(e).find(`select#pais${n}`).val(),o.agregarParienteAsociadoPep(r)}}else o.datosParienteAsociadoPep=null;return o}function obtenerDatosInfoEconomica(e,i,t){let o=new informacionEconomicaInicial(t);o.montoIngresos=$(e).find(`input[id=montoIngresos${i}]`).val(),o.propositoRC=$(e).find(`input:text[id=propositoRC${i}]`).val();let n=$(e).find(`div#fuenteingresos${i}`);return $(n).children().each(function(e){switch($(this).find("input").attr("name")){case"nombreComercial":let e=new informacionNegocioPropio;e.nombreComercial=$(this).find("input").val(),o.agregarNegocioPropio(e);break;case"nombreEmpleador":let i=new informacionNombreEmpleador;i.nombreEmpleador=$(this).find("input").val(),o.agregarRelacionDependencia(i);break;case"otrasFuentesIngresos":let t=new informacionOtrosIngresos;t.otrasFuentesIngreso=$(this).find("input").val(),o.agregarotrosIngresos(t)}}),o}function obtenerDatosProductoServicio(e){console.log("obteniendo datos de productos y servicios");const i=new Array;for(let t=0;t<e.length;t++){const o=$(e[t]).attr("id"),n=$(e[t]).attr("idproductoservicio");let a=new dicProductoServicio(n);a.fecha=$(e[t]).find(`input#fecha${o}`).val(),a.lugar.pais=$(e[t]).find(`select[id=pais${o}] option:selected`).val(),a.lugar.departamento=$(e[t]).find(`select[id=depto${o}] option:selected`).val(),a.lugar.municipio=$(e[t]).find(`select[id=muni${o}] option:selected`).val(),a.identificador=$(e[t]).find(`input#identificador${o}`).val(),a.tipo=$(e[t]).find(`input#tipo${o}`).val(),a.nombre=$(e[t]).find(`input#nombre${o}`).val(),a.descripcion=$(e[t]).find(`input#descripcion${o}`).val(),a.nombreContrata=$(e[t]).find(`input#nombreContrata${o}`).val(),a.moneda=$(e[t]).find("select.moneda option:selected").val(),a.valor=$(e[t]).find(`input#valor${o}`).val();const r=$(e[t]).find(`div#datosBeneficiario${o}`).children();a.beneficiarios=obtenerDiccionarioCamposMinimos(r);const l=$(e[t]).find(`div#datosOtrosFirmantes${o}`).children();a.otrosFirmantes=obtenerDiccionarioCamposMinimos(l),i.push(a)}return i}function obtenerDatosOtrosIngresos(){let e=new Array;return $("div#datosOtrosIngresos").children().each(function(){let i=new dicPerfilEconomicoOtrosIngresos($(this).attr("idoi"));i.tipoOI=$(this).find("select.tipoOtrosIngresos").val(),i.detalleOI=$(this).find("input.DetalleOtrosIngresos").val(),i.tipoMoneda=$(this).find("select.moneda ").val(),i.montoAproximado=$(this).find("input.montoAproximado ").val(),e.push(i)}),e}function obtenerUbicacionesGeograficas(e){let i=new Array;return $(e).children().each(function(){let e=new dicLugar;e.pais=$(this).find("select.pais option:selected").val(),"1"===e.pais&&(e.departamento=$(this).find("select.depto option:selected").val(),e.municipio=$(this).find("select.muni option:selected").val()),i.push(e)}),i}function obtenerDatosPerfilTransaccional(){let e=new Array;return $("div#datosPerfilTransaccional").children().each(function(){let i=new dicPerfilTransaccional($(this).attr("iddpet"));i.fecha=$(this).find("div.date>input.Pspt").val(),i.productoServicio=$(this).find("input.productoServicioPspt").val(),i.tipoMoneda=$(this).find("select.moneda ").val(),i.montoPromedioMensual=$(this).find("input.montoAproximado ").val(),i.pubGeo=obtenerUbicacionesGeograficas($(this).find("div#ubicacionesGeoraficas")),e.push(i)}),e}function obtenerDatosPerfilEconomicoTransaccional(e){console.log("perfil economico transaccinal");let i=null;if(0!=$(e).children().length){const t=$(e).attr("idperfileconomicotransaccional");(i=new dicPerfilEconomicoTransaccional(t)).actualizacion=$(e).find("select#actualizacionPet").val(),i.fecha=$(e).find("input#fechaPet").val(),$("#datosNegocioPropio").children().each(function(){const e=$(this).attr("iddiccionarioperfileconomiconegociopropio");let t=new dicPerfilEconomicoNegocioPropio(e);t.nombreComercial=$(this).find("input.nombreComercial").val(),t.principalActividadEconomica=$(this).find("input.principalActividadEconomica").val(),t.fechaInscripcionNegocio=$(this).find("input.InscripcionNegocio").val(),t.numeroRegistro=$(this).find("input.numeroRegistro").val(),t.folio=$(this).find("input.folio").val(),t.libro=$(this).find("input.libro").val(),t.direccionNegocio=$(this).find("input.direccion").val(),t.lugar.pais=$(this).find("select.pais option:selected").val(),"1"===t.lugar.pais&&(t.lugar.departamento=$(this).find("select.depto option:selected").val(),t.lugar.municipio=$(this).find("select.muni option:selected").val()),t.tipoMoneda=$(this).find("select.moneda option:selected").val(),t.montoAproximado=$(this).find("input.montoAproximado").val(),i.agregarNegocioPropio(t)}),$("div#datosRelacionDependencia").children().each(function(){let e=new dicPerfilEconomicoRelacionDependencia($(this).attr("idrd"));e.sector=$(this).find("select.sector").val(),e.nombreEmpleador=$(this).find("input.NombreEmpleador").val(),e.priActEcoE=$(this).find("input.prinActiEcoEmple").val(),e.puestoDesempenia=$(this).find("input.puestoDesempenia").val(),e.direccionEmpleador=$(this).find("input.direccion").val(),e.lugar.pais=$(this).find("select.pais").val(),e.lugar.departamento=$(this).find("select.depto").val(),e.lugar.municipio=$(this).find("select.muni").val(),e.tipoMoneda=$(this).find("select.moneda ").val(),e.montoAproximado=$(this).find("input.montoAproximado ").val(),i.agregarRelacionDependencia(e)}),i.otrosIngresos=obtenerDatosOtrosIngresos(),i.perfilTransaccional=obtenerDatosPerfilTransaccional()}return i}function obtenerDatos(){let e=new diccionarioFormulario($(".diccionarioFormulario").attr("idDiccionario"));e.titulares=obtenerDiccionarioCamposMinimos($("#titulares>div"));const i=$("div#datosProductoServicio").children();e.productos=obtenerDatosProductoServicio(i);const t=$("div#perfilEconomicoTransaccional").find("div.card-body");return e.perfilEconomico=obtenerDatosPerfilEconomicoTransaccional(t),console.log(e),e}function noEnviarFormularioConEnter(){$("#diccionarioFormulario").on("keyup keypress",function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1})}$(document).ready(function(){console.log("Esperando a que la pagina cargue completamente "),$("input[type=text]"),noEnviarFormularioConEnter(),setFormatoFecha($(".date")),verificaActuaNombrePropio($(".actuaNombrePropio")),habilitaDepartamentoMunicipio($(".deshabilitaDepartamentoMunicipio")),cargarMunicipios($(".getMunicipio")),validarApellidoCasada($(".apellidoCasada")),habilitaOtraCondicionMigratoria($("select.condicionMigratoria")),validarNit($(".validarNit")),habilitaPaisPasaporte($(".validaPaisPasaporte")),agregarTemplateNacionalidad($(".agregarNacionalidad")),eliminarTemplateNacionalidad($(".borrarNacionalidad")),agregarTemplateTelefono($(".agregarTelefono")),eliminarTemplateTelefono($(".borrarTelefono")),verificarPersonaPep($(".pep")),habilitaOtroOrigenriqueza($("select.otroOrigenRiqueza")),verificarAsoPep($(".asoPep")),habilitaOtroCampoDesdeSelect($("select.parentesco"),6),habilitaOtroCampoDesdeSelect($("select.motivoAsociacion"),5),btnaddfamasopep($("button.agregarFamiliarAsociado")),validarTipoFuenteIngreso($("select.fuenteIngresos")),agregarTemplateFuenteIngresos($("button.agregarFuenteIngresos")),borrarTemplateFuenteIngresos($(".borrarFuenteIngreso")),AgregarTitular(),eliminarCard($("#titulares>div")),eliminarCard($("#datosProductoServicio>div")),eliminarCard($("#perfilEconomicoTransaccional>div")),agregarProductoServicio($("button.agregarProductoServicio")),btnAgregarBeneficiario($("button.agregarBeneficiario")),btnAgregarOtroFirmantes($("button.agregarOtrosFirmantes")),agregarPerfilEconomico($("button.agregarPerfilEconomico")),agregarPerfilEconomicoNegocioPropio($("button#agregarNegocioPropio")),agregarPerfilEconomicoRelacionDependencia($("button#agregarRelacionDependencia")),agregarTemplateOtrosIngresos("button#agregarOtrosIngresos"),agregarTemplatePerfilTransaccional("button#agregarPerfilTransaccional"),agregarPUG($("button.agregarUbicacionGeo")),borrarUbicacionGeografica("button.btnUbicacionGeografica"),validarFormulario()});